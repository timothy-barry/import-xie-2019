#########################################
# 0. Load data, packages, set directories
#########################################
library(magrittr)
xie_offsite <-.get_config_path("LOCAL_XIE_2019_DATA_DIR")
raw_data_dir <- paste0(xie_offsite, "raw/")
intermediate_file_dir <- paste0(xie_offsite, "intermediate/")
processed_data_dir <- paste0(xie_offsite, "processed/")
if (!dir.exists(processed_data_dir)) dir.create(processed_data_dir)
raw_data_dir
intermediate_file_dir
processed_data_dir
intermediate_file_dir
list.files(intermediate_file_dir)
#####################
# 1. create gRNA odms
#####################
# 1. ungrouped
ungrouped_gRNA_mat <- readRDS(paste0(intermediate_file_dir, "ungrouped_matrix.rds"))
dim(ungrouped_gRNA_mat)
ungrouped_gRNA_mat[1,]
y <- ungrouped_gRNA_mat[1,]
head(y)
y <- y[y >= 1]
y
length(y)
hist(y)
table(y)
y <- ungrouped_gRNA_mat[2,]
y <- y[y >= 1]
table(y)
y <- ungrouped_gRNA_mat[2,]
y <- y[y >= 1]
table(y)
hist(y)
sum(y >= 2)
sum(y >= 1)
y <- ungrouped_gRNA_mat[3,]
y <- y[y >= 1]
y
table(y)
sum(t >= 1)
sum(y >= 1)
head(ungrouped_gRNA_mat)
sum(ungrouped_gRNA_mat == 1)
s1 <- sum(ungrouped_gRNA_mat == 1)
sgt1 <- sum(ungrouped_gRNA_mat >= 2)
sgt1
s1
sgt1 <- sum(ungrouped_gRNA_mat >= 1)
sum(ungrouped_gRNA_mat == 1)/sum(ungrouped_gRNA_mat >= 1)
sum(ungrouped_gRNA_mat == %in% c(1,2))/sum(ungrouped_gRNA_mat >= 1)
sum(ungrouped_gRNA_mat %in% c(1,2))/sum(ungrouped_gRNA_mat >= 1)
sum(ungrouped_gRNA_mat <= 2)/sum(ungrouped_gRNA_mat >= 1)
sum(ungrouped_gRNA_mat == 1)/sum(ungrouped_gRNA_mat >= 1)
colnames(ungrouped_gRNA_mat)
row.names(ungrouped_gRNA_mat)
barcodes <- colnames(ungrouped_gRNA_mat)
barcodes
barcodes
spacer_seqs <- row.names(ungrouped_gRNA_mat)
length(spacer_seqs)
head(spacer_seqs)
y
length(y)
mean(y)
sum(y > 5)
xie_offsite <-.get_config_path("LOCAL_XIE_2019_DATA_DIR")
raw_data_dir <- paste0(xie_offsite, "raw/")
intermediate_file_dir <- paste0(xie_offsite, "intermediate/")
gRNA_matrix_list <- readRDS(paste0(intermediate_file_dir, "gRNA_matrix_list.rds"))
9
